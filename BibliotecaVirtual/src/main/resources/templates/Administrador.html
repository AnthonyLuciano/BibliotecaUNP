<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>BibliotecaUNP - Painel do Administrador</title>
  <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
<div class="container">

  <header class="branding">
    <h2><span>Biblioteca</span>UNP</h2>
    <a href="/login" class="btn btn-logout">Sair</a>
  </header>

  <h2>Painel do Administrador</h2>

  <!-- Menu de Abas -->
  <div class="tab-menu">
    <button class="tab-button active" onclick="openTab('usuarios')">游논 Usu치rios</button>
    <button class="tab-button" onclick="openTab('livros')">游닄 Livros</button>
    <button class="tab-button" onclick="openTab('relatorios')">游늵 Relat칩rios</button>
  </div>

  <!-- Aba: Usu치rios -->
  <div id="usuarios" class="tab-content" style="display: block;">
    <section>
      <h4>Gerenciamento de Usu치rios</h4>
      <form method="get" action="/admin/pesquisar" class="search-bar">
        <input type="text" name="busca" placeholder="游댌 Pesquisar usu치rio..." />
        <button type="submit" class="btn">Pesquisar</button>
      </form>

      <table class="table">
        <thead>
        <tr>
          <th>ID</th>
          <th>Usu치rio</th>
          <th>Funcion치rio?</th>
          <th>A칞칫es</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="usuario : ${usuarios}">
          <td th:text="${usuario.id}"></td>
          <td>
            <form th:action="@{/admin/editar}" method="post" class="form-inline">
              <input type="hidden" name="id" th:value="${usuario.id}" />
              <input type="text" name="username" th:value="${usuario.username}" required />
              <label>
                <input type="checkbox" name="admin" th:checked="${usuario.admin}" />
                Funcion치rio
              </label>
              <button type="submit" class="btn btn-save">Salvar</button>
            </form>
          </td>
          <td th:text="${usuario.admin ? 'Sim' : 'N칚o'}"></td>
          <td>
            <form th:action="@{/admin/excluir/{id}(id=${usuario.id})}" method="post" onsubmit="return confirm('Tem certeza que deseja excluir?')">
              <button type="submit" class="btn btn-delete">Excluir</button>
            </form>
          </td>
        </tr>
        </tbody>
      </table>
    </section>

    <section class="form-section">
      <h4>Cadastrar Novo Usu치rio</h4>
      <form th:action="@{/admin/cadastrar}" method="post" class="form-grid">
        <input type="text" name="username" placeholder="Usu치rio" required />
        <input type="password" name="password" placeholder="Senha" required />
        <label>
          <input type="checkbox" name="admin" />
          Funcion치rio
        </label>
        <button type="submit" class="btn btn-create">Cadastrar</button>
      </form>

      <div th:if="${erro}" th:text="${erro}" class="alert-error"></div>
    </section>

    <!-- Coloque este bloco onde deseja exibir os bot칫es -->
    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
      <a href="/usuario" class="btn btn-usuario" style="background: #2196f3; color: #fff;">游녻 Ver como Usu치rio</a>
      <a href="/admin/testes" class="btn btn-testes" style="background: #4caf50; color: #fff;">游댢 Painel de Testes</a>
    </div>
  </div>

  <!-- Aba: Livros -->
  <div id="livros" class="tab-content" style="display: none;">
    <h4>游닄 Cadastro e Aprova칞칚o de Livros</h4>
    <h1>EM DESENVOLVIMENTO, ISSO 칄 UM MOCKUP</h1>
    <section class="form-section">
      <h4>Cadastrar Novo Livro</h4>
      <form th:action="@{/admin/livros/cadastrar}" method="post" enctype="multipart/form-data" class="form-grid">
        <input type="text" name="titulo" placeholder="T칤tulo" required />
        <input type="text" name="autor" placeholder="Autor" required />
        <input type="text" name="isbn" placeholder="ISBN (10 ou 13)" required />
        <input type="file" name="capa" accept="image/*" />
        <button type="submit" class="btn btn-create">Cadastrar Livro</button>
      </form>
    </section>

    <section style="margin-top: 30px;">
      <h4>Solicita칞칫es Pendentes de Autores</h4>
      <table class="table">
        <thead>
        <tr>
          <th>ID</th>
          <th>T칤tulo</th>
          <th>Autor</th>
          <th>Capa</th>
          <th>A칞칫es</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="livro : ${livrosPendentes}">
          <td th:text="${livro.id}"></td>
          <td th:text="${livro.titulo}"></td>
          <td th:text="${livro.autor}"></td>
          <td>
            <img th:src="${livro.capaUrl != null ? livro.capaUrl : '/img/placeholder-book.png'}" alt="Capa" style="height:80px"/>
          </td>
          <td>
            <form th:action="@{/admin/livros/aprovar}" method="post" style="display: inline;">
              <input type="hidden" name="id" th:value="${livro.id}" />
              <button type="submit" class="btn btn-save">Aprovar</button>
            </form>
            <form th:action="@{/admin/livros/rejeitar}" method="post" style="display: inline;" onsubmit="return confirm('Rejeitar este livro?')">
              <input type="hidden" name="id" th:value="${livro.id}" />
              <button type="submit" class="btn btn-delete">Rejeitar</button>
            </form>
          </td>
        </tr>
        </tbody>
      </table>
    </section>
  </div>

  <!-- Aba: Relat칩rios -->
  <div id="relatorios" class="tab-content" style="display: none;">
    <h4>游늵 Relat칩rios</h4>
    <h1>EM DESENVOLVIMENTO, ISSO 칄 UM MOCKUP</h1>
    <p>Relat칩rios administrativos e estat칤sticas de uso ser칚o exibidos aqui.</p>
    <ul>
      <li>Total de usu치rios cadastrados</li>
      <li>Livros mais requisitados</li>
      <li>Acessos por per칤odo</li>
    </ul>
    <p><em>(Implementa칞칚o futura com gr치ficos interativos e filtros)</em></p>
  </div>

</div>

<!-- Script de controle das abas -->
<script src="/js/admin-tabs.js"></script>
</body>
</html>
